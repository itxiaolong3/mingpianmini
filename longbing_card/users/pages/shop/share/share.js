function _defineProperty(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var app=getApp();Page({imagePath:"",data:{template:{},shareData:{},qrImg:""},onLoad:function(t){var r,n=this;wx.hideShareMenu(),setTimeout(function(){app.util.showLoading(4)},300),n.setData({globalData:app.globalData},function(){20<(r=n.data.globalData.configInfo.my_company.name).length&&n.data.globalData.configInfo.my_company.short_name&&(r=n.data.globalData.configInfo.my_company.short_name)});var e=getCurrentPages(),o=e[e.length-2].__viewData__;console.log("prevPage",o);var a=o.shareParamObj;18<a.name.length&&(a.name=a.name.substr(0,18)+"...");var i=o.tmp_showPrice,p=(a.price/1e4).toFixed(2),l=void 0,x=!1;1==i?1<p||1==p?(a.price=p+"万",l=22*parseInt(a.price.length)+60+"rpx"):(l=22*parseInt(a.price.length)+40+"rpx",0==a.price&&(a.price=app.globalData.configInfo.config.btn_talk||"面议",l=40*parseInt(a.price.length)+20+"rpx",x=!0)):a.price=app.globalData.configInfo.config.btn_talk||"面议";var c=app.globalData.isIphoneX;wx.hideShareMenu(),setTimeout(function(){var t,e=[{type:"image",url:"/longbing_card/resource/images/icon-productBg.png",css:{top:"0rpx",left:"0rpx",width:"612rpx",height:"82rpx",rotate:0,borderRadius:0}},{type:"text",text:r,css:{fontSize:"28rpx",top:"10rpx",left:"306rpx",color:"#ffffff",bold:"bold",textDecoration:"none",align:"center",width:"572rpx"}},{type:"rect",css:{top:"82rpx",left:"0rpx",color:"#ffffff",borderRadius:"0rpx",width:"612rpx",height:"97rpx"}},{type:"text",text:a.name,css:{fontSize:"30rpx",top:"78rpx",left:"20rpx",color:"#313131",bold:"bold",textDecoration:"none",align:"left",width:"572rpx"}},{type:"image",url:a.cover2,css:{top:"187rpx",left:"9rpx",width:"594rpx",height:"594rpx",rotate:0,borderRadius:0}},{type:"rect",css:{top:"786rpx",left:"0rpx",color:"#ffffff",borderRadius:"0rpx",width:"612rpx",height:"200rpx"}},{type:"image",url:a.qr,css:(t={top:"808rpx"},_defineProperty(t,"top","808rpx"),_defineProperty(t,"left","78rpx"),_defineProperty(t,"width","158rpx"),_defineProperty(t,"height","158rpx"),_defineProperty(t,"rotate",0),_defineProperty(t,"borderRadius",0),t)},{type:"text",text:"长按识别小程序码",css:{fontSize:"30rpx",top:"850rpx",left:"300rpx",color:"#313131",bold:"bold",textDecoration:"none",align:"left",width:"300rpx"}},{type:"text",text:"超值好货一起购",css:{fontSize:"24rpx",top:"900rpx",left:"300rpx",color:"#313131",bold:"bold",textDecoration:"none",align:"left",width:"300rpx"}}];1==i?(e.push({type:"text",text:"已售"+a.sale_count,css:{fontSize:"24rpx",top:"130rpx",right:"20rpx",color:"#313131",bold:"bold",textDecoration:"none",align:"right",width:"680rpx"}}),0==x?e.push({type:"text",text:"￥",css:{fontSize:"24rpx",top:"130rpx",left:"20rpx",color:"#e93636",bold:"bold",textDecoration:"none",align:"left",width:"20rpx"}},{type:"text",text:a.price,css:{fontSize:"36rpx",top:"120rpx",left:"50rpx",color:"#e93636",bold:"bold",textDecoration:"none",align:"left",width:"266rpx"}},{type:"text",text:"/"+a.unit,css:{fontSize:"24rpx",top:"130rpx",left:l,color:"#e93636",bold:"bold",textDecoration:"none",align:"left",width:"200rpx"}}):e.push({type:"text",text:a.price,css:{fontSize:"24rpx",top:"120rpx",left:"20rpx",color:"#e93636",bold:"bold",textDecoration:"none",align:"left",width:"266rpx"}})):e.push({type:"text",text:a.price,css:{fontSize:"24rpx",top:"120rpx",left:"20rpx",color:"#e93636",bold:"bold",textDecoration:"none",align:"left",width:"266rpx"}});var o={width:"612rpx",height:"987rpx",background:"#e1e1e1",views:e};n.setData({template:o,isIphoneX:c})},3e3)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(t){},onImgOK:function(t){this.setData({imagePath:t.detail.path}),wx.hideLoading(),console.log(t)},previewImage:function(){var t=this.data.imagePath,e=[];e.push(t),wx.previewImage({current:t,urls:e})},saveImage:function(){var o=this;console.log("点击保存海报"),wx.authorize({scope:"scope.writePhotosAlbum",success:function(t){wx.saveImageToPhotosAlbum({filePath:o.data.imagePath,success:function(t){console.log("保存商品海报成功 ==>",t),wx.showToast({icon:"none",title:"海报保存成功，快去相册看看吧！",duration:2e3})},fail:function(t){console.log("fail ==> ",t)}})},fail:function(t){var e=t.errMsg;(-1<e.indexOf("fail auth deny")||-1<e.indexOf("fail:auth deny"))&&o.setData({isSetting:!0})}})}}); 
