var _xx_util=require("../../../../resource/js/xx_util.js"),_xx_util2=_interopRequireDefault(_xx_util),_index=require("../../../../resource/apis/index.js");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var a=0,e=Array(t.length);a<t.length;a++)e[a]=t[a];return e}return Array.from(t)}var app=getApp();Page({data:{dataList:{page:1,total_page:"",list:[],refresh:!1,loading:!0}},onLoad:function(t){var a=this;console.log(t,"options"),wx.hideShareMenu();var e=t.id,o=t.status;getApp().getConfigInfo(!0,!1).then(function(){a.setData({globalData:app.globalData,id:e,avatarUrl:wx.getStorageSync("toAvatar"),status:o},function(){a.toGetClientList()})})},onReady:function(){},onShow:function(){},onHide:function(){wx.setStorageSync("toAvatar","")},onUnload:function(){wx.setStorageSync("toAvatar","")},onPullDownRefresh:function(){var t=this;app.globalData.configInfo=!1,getApp().getConfigInfo(!0,!1).then(function(){t.setData({globalData:app.globalData},function(){t.setData({"dataList.refresh":!0,"dataList.page":1},function(){wx.showNavigationBarLoading(),t.toGetClientList()})})})},onReachBottom:function(){var t=this,a=t.data.dataList;a.page==a.total_page||a.loading||t.setData({"dataList.page":parseInt(a.page)+1,"dataList.loading":!0},function(){t.toGetClientList()})},onPageScroll:function(t){},onShareAppMessage:function(t){},toGetClientList:function(){var o=this,t=o.data,n=t.dataList,a=t.id,e={page:n.page,staff_id:a};n.refresh||_xx_util2.default.showLoading(),_index.bossModel.getClientList(e).then(function(t){_xx_util2.default.hideAll();var a=n,e=t.data;n.refresh||(e.list=[].concat(_toConsumableArray(a.list),_toConsumableArray(e.list))),e.page=e.page,e.refresh=!1,e.loading=!1,o.setData({dataList:e})})},toJump:function(t){var a=_xx_util2.default.getData(t),e=a.status,o=(a.index,a.type);if("toJumpUrl"==e)if("toCusDetail"==o){var n=this.data.avatarUrl;n||(n=app.globalData.defaultUserImg),app.globalData.avatarUrlStaff=n,_xx_util2.default.goUrl(t)}else _xx_util2.default.goUrl(t)}}); 
