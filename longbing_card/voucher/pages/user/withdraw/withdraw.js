var _xx_util=require("../../../../resource/js/xx_util.js"),_xx_util2=_interopRequireDefault(_xx_util),_index=require("../../../../resource/apis/index.js");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var app=getApp(),voucher=require("../../../../templates/voucher/voucher.js");Page({data:{tabList:[{status:"toSetTab",name:"提现申请中"},{status:"toSetTab",name:"提现已到账"}],currentIndex:0},onLoad:function(t){console.log(t,"options"),wx.hideShareMenu();this.setData({globalData:app.globalData,paramObj:{}})},onReady:function(){},onShow:function(){this.toGetMyEarning()},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){this.setData({refresh:!0},function(){wx.showNavigationBarLoading()})},onReachBottom:function(){},onShareAppMessage:function(){},toGetMyEarning:function(){var a=this;_index.userModel.getMyEarning().then(function(t){_xx_util2.default.hideAll();var e=t.data;a.setData({dataList:e})})},toGetWithdraw:function(t){_index.userModel.getWithdraw(t).then(function(t){0==t.errno&&wx.showToast({icon:"success",title:"已申请提现",duration:2e3,success:function(){setTimeout(function(){wx.navigateTo({url:"/longbing_card/voucher/pages/user/withlist/withlist"})},2e3)}})})},toJump:function(t){var e=_xx_util2.default.getData(t).status,a=this.data.dataList,o=a.cash_mini,n=a.profit;"toWithdrawAll"==e&&(o<=n?this.setData({inputMoney:n}):_xx_util2.default.showModalText("","钱包余额小于最低提现标准！"))},formSubmit:function(t){var e=this,a=t.detail.formId,o=_xx_util2.default.getFromData(t),n=(o.index,o.status),i=t.detail.value,u=e.data.dataList,s=u.cash_mini,r=u.profit,c=e.data.globalData.configInfo.config.admin_account;if("toWithDrawBtn"==n){if(!i.account)return _xx_util2.default.showModalText("","请输入微信账号！"),!1;if(i.money=1*i.money,r<s)return _xx_util2.default.showModalText("","钱包余额小于最低提现标准！"),!1;if(i.money<s)return _xx_util2.default.showModalText("","提现金额未达到最低提现标准！"),!1;wx.showModal({title:"",content:"需要添加管理员微信好友后才可提现\r\n管理员微信号："+c,confirmText:"复制微信",cancelText:"关闭",success:function(t){t.confirm?(wx.setClipboardData({data:c,success:function(t){wx.getClipboardData({success:function(t){console.log("复制微信号 ==>>",t.data)}})}}),e.toGetWithdraw(i)):t.cancel&&e.toGetWithdraw(i)}})}e.toSaveFormIds(a)},toSaveFormIds:function(t){var e={formId:t};_index.baseModel.getFormId(e).then(function(t){})}}); 
